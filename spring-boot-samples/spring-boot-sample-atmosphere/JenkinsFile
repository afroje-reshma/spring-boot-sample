node {
    
    stage 'checkout'
    git 'https://github.com/afroje-reshma/spring-boot-sample.git'
    def project_path = "spring-boot-samples/spring-boot-sample-atmosphere"
    
    stage 'sonar-scan'
    def scannerHome = tool 'sonar-scanner'
    sh "${scannerHome}/bin/sonar-scanner"
    
     dir(project_path){
     withEnv(["PATH+MAVEN=${tool 'M3'}/bin"]){
     stage 'compiling, packaging'    
     sh 'mvn clean package'
     
     stage 'test-archival/HTML-verify'
     publishHTML(target: [allowMissing: true,
     alwaysLinkToLastBuild: false, 
     keepAll: true, 
     reportDir: 'target/site/jacoco',
     reportFiles: 'index.html', reportName: 'HTML Report'])
     
     step([$class: 'JUnitResultArchiver',
     testResults: 'target/surefire-reports/TEST-*.xml'])
  }

 }
}
